# GitHub Actions Architecture Diagram

## ğŸ—ï¸ High-Level Architecture

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     TRIGGER EVENTS                           â”‚
â”‚  PR â”‚ Push:main â”‚ Schedule â”‚ Manual â”‚ Branch:release/*      â”‚
â””â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
   â”‚        â”‚          â”‚        â”‚              â”‚
   â–¼        â–¼          â–¼        â–¼              â–¼
â”Œâ”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  PR  â”‚ â”‚ Main â”‚ â”‚Night â”‚ â”‚Docs  â”‚ â”‚  Release Workflows   â”‚
â”‚      â”‚ â”‚  CI  â”‚ â”‚  ly  â”‚ â”‚      â”‚ â”‚ Dockerâ”‚Condaâ”‚PyPI   â”‚
â””â”€â”€â”¬â”€â”€â”€â”˜ â””â”€â”€â”€â”¬â”€â”€â”˜ â””â”€â”€â”€â”¬â”€â”€â”˜ â””â”€â”€â”€â”¬â”€â”€â”˜ â””â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜
   â”‚         â”‚        â”‚        â”‚        â”‚      â”‚     â”‚
   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”˜
                      â”‚
                      â–¼
         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
         â”‚    REUSABLE WORKFLOWS LAYER        â”‚
         â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
         â”‚  â”‚  Docker  â”‚  â”‚    Conda     â”‚   â”‚
         â”‚  â”‚  Build   â”‚  â”‚    Build     â”‚   â”‚
         â”‚  â”‚  Test    â”‚  â”‚   Publish    â”‚   â”‚
         â”‚  â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
         â”‚       â”‚               â”‚            â”‚
         â”‚  â”Œâ”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”   â”‚
         â”‚  â”‚   PyPI   â”‚  â”‚ Integration  â”‚   â”‚
         â”‚  â”‚  Build   â”‚  â”‚    Test      â”‚   â”‚
         â”‚  â”‚ Publish  â”‚  â”‚              â”‚   â”‚
         â”‚  â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
         â””â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                 â”‚                â”‚
                 â–¼                â–¼
         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
         â”‚    COMPOSITE ACTIONS LAYER         â”‚
         â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
         â”‚  â”‚  Setup   â”‚  â”‚   Docker     â”‚   â”‚
         â”‚  â”‚  Docker  â”‚  â”‚   Login      â”‚   â”‚
         â”‚  â”‚ Buildx   â”‚  â”‚    NGC       â”‚   â”‚
         â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
         â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
         â”‚  â”‚    Determine Version         â”‚ â”‚
         â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ”„ Workflow Execution Flows

### Pull Request Flow

```
PR Opened/Updated
    â”‚
    â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚         ci-pull-request.yml                       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                â”‚
â”‚  â”‚ pre-commit   â”‚ â—„â”€â”€â”€ Fast fail (5 min)         â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜                                â”‚
â”‚         â”‚ âœ“                                       â”‚
â”‚         â–¼                                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚ docker-build â”‚â”€â”€â”€â”€â–¶â”‚  Reusable:         â”‚    â”‚
â”‚  â”‚   (amd64)    â”‚     â”‚  docker-build.yml  â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚         â”‚ âœ“                                       â”‚
â”‚         â–¼                                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚ docker-test  â”‚â”€â”€â”€â”€â–¶â”‚  Reusable:         â”‚    â”‚
â”‚  â”‚   + coverage â”‚     â”‚  docker-test.yml   â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚         â”‚ âœ“                                       â”‚
â”‚         â–¼                                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”‚
â”‚  â”‚ library-mode-test (if approved)      â”‚       â”‚
â”‚  â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚       â”‚
â”‚  â”‚   â”‚  Build   â”‚â”€â”€â”€â–¶â”‚   Test       â”‚  â”‚       â”‚
â”‚  â”‚   â”‚  Conda   â”‚    â”‚ Integration  â”‚  â”‚       â”‚
â”‚  â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚       â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â”‚
â”‚         â”‚                                         â”‚
â”‚         â–¼                                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                â”‚
â”‚  â”‚   Summary    â”‚ â—„â”€â”€â”€ All results               â”‚
â”‚  â”‚  (required)  â”‚                                â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â–¼
    PR Status: âœ“ or âœ—
```

### Nightly Build Flow

```
Schedule: 23:30 UTC (or Push to main or Manual)
    â”‚
    â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚          scheduled-nightly.yml                          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”             â”‚
â”‚  â”‚   Determine Version (YYYY.MM.DD)      â”‚             â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜             â”‚
â”‚                â”‚                                         â”‚
â”‚                â–¼                                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚                           â”‚                      â”‚   â”‚
â”‚  â–¼                           â–¼                      â–¼   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚   Docker   â”‚    â”‚     Conda      â”‚    â”‚  PyPI  â”‚   â”‚
â”‚  â”‚            â”‚    â”‚                â”‚    â”‚        â”‚   â”‚
â”‚  â”‚  Multi-    â”‚    â”‚  Build â”€â”€â”€â–¶    â”‚    â”‚ Build  â”‚   â”‚
â”‚  â”‚ Platform   â”‚    â”‚        Publish â”‚    â”‚   â”‚    â”‚   â”‚
â”‚  â”‚  Build +   â”‚    â”‚                â”‚    â”‚   â–¼    â”‚   â”‚
â”‚  â”‚  Push NGC  â”‚    â”‚   To dev       â”‚    â”‚Publish â”‚   â”‚
â”‚  â”‚            â”‚    â”‚   channel      â”‚    â”‚Artif.  â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚        â”‚                    â”‚                   â”‚       â”‚
â”‚        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â”‚
â”‚                             â”‚                           â”‚
â”‚                             â–¼                           â”‚
â”‚                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                     â”‚
â”‚                    â”‚   Summary    â”‚                     â”‚
â”‚                    â”‚   Report     â”‚                     â”‚
â”‚                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                             â”‚
                             â–¼
        All artifacts published with version YYYY.MM.DD
```

### Release Flow

```
Create release/X.Y.Z branch
    â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                      â”‚                  â”‚                â”‚
    Automatic trigger for ALL THREE:    â”‚                â”‚
                      â”‚                  â”‚                â”‚
                      â–¼                  â–¼                â–¼
                â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                â”‚ Docker â”‚         â”‚  Conda   â”‚    â”‚   PyPI   â”‚
                â”‚Release â”‚         â”‚ Release  â”‚    â”‚ Release  â”‚
                â””â”€â”€â”€â”€â”¬â”€â”€â”€â”˜         â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜
                     â”‚                   â”‚               â”‚
                     â”‚ All run in parallel               â”‚
                     â”‚                   â”‚               â”‚
                     â–¼                   â–¼               â–¼
                     â”‚                   â”‚               â”‚
                     â”‚   Uses reusable workflows:        â”‚
                     â”‚   - docker-build.yml              â”‚
                     â”‚   - conda-build.yml â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                     â”‚   - conda-publish.yml
                     â”‚   - pypi-build.yml â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                     â”‚   - pypi-publish.yml
                     â”‚
                     â–¼
    All artifacts published to respective registries with version X.Y.Z

Alternative: Manual trigger for individual releases with custom options
```

---

## ğŸ”— Component Dependencies

### Docker Build Chain

```
Any Workflow
    â”‚
    â”œâ”€ Calls: docker-build.yml
    â”‚       â”‚
    â”‚       â”œâ”€ Uses: setup-docker-buildx (action)
    â”‚       â”‚       â””â”€ Sets up QEMU (if needed)
    â”‚       â”‚       â””â”€ Sets up Buildx
    â”‚       â”‚
    â”‚       â”œâ”€ Uses: docker-login-ngc (action)
    â”‚       â”‚       â””â”€ Authenticates with NGC
    â”‚       â”‚
    â”‚       â””â”€ Returns: image-digest
    â”‚
    â””â”€ Calls: docker-test.yml
            â””â”€ Uses: built image from docker-build.yml
            â””â”€ Returns: test results + coverage
```

### Package Build & Publish Chain

```
Release/Nightly Workflow
    â”‚
    â”œâ”€ Conda Path:
    â”‚   â”œâ”€ Calls: conda-build.yml
    â”‚   â”‚       â””â”€ Uses: determine-version (action)
    â”‚   â”‚       â””â”€ Uploads: artifacts
    â”‚   â”‚
    â”‚   â””â”€ Calls: conda-publish.yml
    â”‚           â””â”€ Downloads: artifacts
    â”‚           â””â”€ Publishes: to channel
    â”‚
    â””â”€ PyPI Path:
        â”œâ”€ Calls: pypi-build.yml
        â”‚       â””â”€ Uses: determine-version (action)
        â”‚       â””â”€ Uploads: wheels
        â”‚
        â””â”€ Calls: pypi-publish.yml
                â””â”€ Downloads: wheels
                â””â”€ Publishes: to Artifactory
```

---

## ğŸ“Š Comparison: Old vs New

### Old Structure (9 workflows, high duplication)

```
build-docs.yml â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                           â”‚ Each has own
docker-build.yml â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ Docker build
                           â”‚ logic (5x)
docker-build-arm.yml â”€â”€â”€â”€â”€â”€â”¤
                           â”‚
docker-nightly-publish.ymlâ”€â”¤
                           â”‚
docker-release-publish.ymlâ”€â”˜

conda-publish.yml â”€â”€â”€â”€â”€â”€â”€â”€â”€â” Scheduled
docker-nightly-publish.ymlâ”€â”¤ separately
pypi-nightly-publish.yml â”€â”€â”˜ (3 workflows)

pre-commit.yml â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
docker-build.yml â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ PR validation
test-library-mode.yml â”€â”€â”€â”€â”€â”˜ (3 workflows)
```

### New Structure (7 + 6 + 3, DRY principle)

```
Main Workflows (7):
â”œâ”€ ci-pull-request.yml â”€â”€â”€â”
â”œâ”€ ci-main.yml â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ Call reusable
â”œâ”€ scheduled-nightly.yml â”€â”¤ workflows
â”œâ”€ release-docker.yml â”€â”€â”€â”€â”¤
â”œâ”€ release-conda.yml â”€â”€â”€â”€â”€â”¤
â”œâ”€ release-pypi.yml â”€â”€â”€â”€â”€â”€â”¤
â””â”€ docs-deploy.yml â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â–¼
Reusable Workflows (6):
â”œâ”€ docker-build.yml â”€â”€â”€â”€â”€â”€â” Single source
â”œâ”€ docker-test.yml â”€â”€â”€â”€â”€â”€â”€â”¤ of truth for
â”œâ”€ conda-build.yml â”€â”€â”€â”€â”€â”€â”€â”¤ each operation
â”œâ”€ conda-publish.yml â”€â”€â”€â”€â”€â”¤
â”œâ”€ pypi-build.yml â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â””â”€ integration-test.yml â”€â”€â”˜
         â”‚
         â–¼
Composite Actions (3):
â”œâ”€ setup-docker-buildx â”€â”€â”€â” Common
â”œâ”€ docker-login-ngc â”€â”€â”€â”€â”€â”€â”¤ operations
â””â”€ determine-version â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ¯ Benefits Visualization

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚            BEFORE REFACTORING                   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  9 workflows Ã— avg 50 lines = 450 lines        â”‚
â”‚  Docker build repeated 5 times                  â”‚
â”‚  Change requires editing 5+ files              â”‚
â”‚  Inconsistent patterns                          â”‚
â”‚  Hard to maintain                               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                      â”‚
                      â”‚ REFACTORING
                      â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚            AFTER REFACTORING                    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  7 + 6 + 3 = 16 components                     â”‚
â”‚  Docker build defined ONCE                      â”‚
â”‚  Change requires editing 1 file                 â”‚
â”‚  Consistent patterns everywhere                 â”‚
â”‚  Easy to maintain                               â”‚
â”‚                                                 â”‚
â”‚  Code Reduction: ~60%                           â”‚
â”‚  Maintenance: 1 file vs 5+ files               â”‚
â”‚  Clarity: Clear hierarchy                       â”‚
â”‚  Reusability: Maximum                           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ“ˆ Execution Timeline Example

### Pull Request (Total: ~15-20 minutes)

```
0:00 â”€ Pre-commit checks start
       â”‚
0:05 â”€ Pre-commit complete âœ“
       â”‚
       â””â”€ Docker build starts (amd64)
          â”‚
0:12 â”€â”€â”€â”€â”€â”˜ Docker build complete âœ“
          â”‚
          â””â”€ Docker test starts (with coverage)
             â”‚
0:17 â”€â”€â”€â”€â”€â”€â”€â”€â”˜ Docker test complete âœ“
             â”‚
             â””â”€ [If approved] Library mode tests start
                â”‚
0:47 â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ Integration tests complete âœ“

Total: ~20 minutes (or ~50 min with integration tests)
```

### Nightly Build (Total: ~45-60 minutes)

```
23:30 â”€ Scheduled trigger
        â”‚
        â”œâ”€ Version determination (YYYY.MM.DD)
        â”‚
        â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚              â”‚              â”‚              â”‚
        â–¼              â–¼              â–¼              â–¼
    Docker        Conda Build    PyPI Build    (parallel)
    Multi-        â”‚              â”‚
    Platform      â–¼              â–¼
    Build     Conda Publish  PyPI Publish
        â”‚
00:15 â”€â”€â”´â”€ All jobs complete âœ“

Total: ~45 minutes (parallel execution)
```

---

## ğŸ” Security Flow

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   External Contributor PR               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
              â”‚
              â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ Check association   â”‚
    â”‚ MEMBER/COLLAB/OWNER?â”‚
    â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
           â”‚      â”‚
      NO   â”‚      â”‚  YES
           â”‚      â”‚
           â–¼      â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚  Check   â”‚ â”‚  Run all tests  â”‚
    â”‚  Label   â”‚ â”‚   immediately   â”‚
    â”‚ok-to-testâ”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜
         â”‚
    â”Œâ”€â”€â”€â”€â”´â”€â”€â”€â”€â”
    â”‚  YES    â”‚  NO
    â–¼         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Run   â”‚  â”‚  Skip  â”‚
â”‚ Tests  â”‚  â”‚ Tests  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ“š Documentation Structure

```
.github/
    â”‚
    â”œâ”€ README.md â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ Start here
    â”‚   â””â”€ Points to all other docs
    â”‚
    â”œâ”€ REFACTORING_SUMMARY.md â—„â”€ Implementation overview
    â”‚   â””â”€ What was created, why, metrics
    â”‚
    â”œâ”€ WORKFLOWS_QUICKSTART.md â—„ For developers
    â”‚   â””â”€ Quick reference, common tasks
    â”‚
    â”œâ”€ WORKFLOWS_MIGRATION.md â—„â”€ For DevOps
    â”‚   â””â”€ Oldâ†’New mapping, migration plan
    â”‚
    â””â”€ WORKFLOWS_REFERENCE.md â—„â”€ Complete reference
        â””â”€ All workflows, inputs, outputs, secrets
```

---

**This architecture provides:**
- âœ… Clear separation of concerns
- âœ… Maximum reusability
- âœ… Easy maintenance
- âœ… Type-safe interfaces
- âœ… Comprehensive documentation
- âœ… Scalable design

**Last Updated**: January 6, 2025
